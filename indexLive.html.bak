<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="description" content="SOMETHIN FUNKY TO LISTEN TO">
        <meta name="keywords" content="internet radio, concert, gabber, hardcore, juke, nightcore, ambient, dance, bass, dnb" />
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>UNAFFILIATED.FUN</title>
        <link href="/assets/favicon.ico" rel="icon" sizes="32x32">
        <link href="liveStyle.notmin.css" rel="stylesheet" />
        <link href="https://unpkg.com/video.js/dist/video-js.min.css" rel="stylesheet">
        <script src="https://unpkg.com/video.js/dist/video.min.js"></script>
        <script src="jquery-3.5.1.slim.min.js"></script>
    </head>

    <body>

        <video id="videoStream" class="video-js vjs-tech" preload="auto" autoplay muted="true">
            <source id="videoStreamSrc" src="https://cdn.video.swagzone.win/hls/stream/index.m3u8" type="application/x-mpegURL"/>
        </video>
        <script type="text/javascript">
            var overrideNative = true;

            var player = videojs('videoStream', {
                html5: {
                    vhs: {
                        overrideNative: overrideNative
                    },
                    nativeVideoTracks: !overrideNative,
                    nativeAudioTracks: !overrideNative,
                    nativeTextTracks: !overrideNative
                }
            });
            player.play();
        </script>
        
        <div class="box">
            <div id="chatDiv" class="row content">
                <iframe id="chat" height="100%" width="100%" frameborder="0"></iframe>
            </div>

            <div class="row footer">
                <audio id="audioStream" preload="" controls>
                    <source src="https://audio.swagzone.win/unaffiliated.mp3"
                    type="audio/mp3">
                    <source src="https://audio.swagzone.win/unaffiliated.ogg"
                    type="audio/ogg">
                </audio>

                <a href="https://discord.com/invite/pmbPxxeujy" target="_blank"><button type="button">Discord Server</button></a>
                <button id="mute" type="button">Toggle Mute</button>
                <button id="hideVideo" type="button">Toggle Audio-Only</button>
                <button id="fullViewVideo" type="button">Toggle Full-View</button>
            </div>
        </div>

        <script type="text/javascript">
            $(document).ready(function () {
                $('#mute').click(function () {
                    var vp = videojs('videoStream').player();
                    
                    var muted = vp.muted();

                    if (muted === true) {
                        vp.muted(false);
                    }
                    else {
                        vp.muted(true);
                    }
                }),

                $('#hideVideo').click(function () {
                    var vShow = document.getElementById('videoStream');
                    var vShowSrc = document.getElementById('videoStreamSrc');

                    var audio = document.getElementById('audioStream');
                    
                    if (vShow.style.visibility === 'hidden') {
                        vShow.style.visibility = 'visible';
                        player.src({type: 'application/x-mpegURL', src: 'https://cdn.video.swagzone.win/hls/stream/index.m3u8'});
                        /*vShowSrc.setAttribute('src', 'https://video.swagzone.win/hls/stream/index.m3u8');*/
                        player.load();
                        player.play();
                    } else {
                        vShow.style.visibility = 'hidden';
                        player.pause();
                        player.src({type: 'application/x-mpegURL', src: ''});
                        /*vShowSrc.removeAttribute('src');*/
                        player.load();
                    }

                    if (audio.paused) {
                        audio.play();
                            /*btn.textContent = "Pause";*/
                        }
                    else {
                        audio.pause();
                        /*btn.textContent = "Play";*/
                    }
                }),

                $('#fullViewVideo').click(function () {
                    var vFull = document.getElementsByClassName('vjs-tech');

                    for (i = 0; i < vFull.length; i++) {
                        if (vFull[i].style.objectFit === 'cover') {    
                            vFull[i].style.objectFit = 'contain';
                        }
                        else {    
                            vFull[i].style.objectFit = 'cover';
                        }
                    };
                });
            });
        </script>


    </body>
</html>